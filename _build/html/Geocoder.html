

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Geocoding with APIs &#8212; Data_Science_Playbook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Geocoder';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Linear Regression for Machine Learning: The Basics" href="Linear_Regression_Basics.html" />
    <link rel="prev" title="Python Basics" href="Basic_intro_Python.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
    
    
      
    
    
    <img src="_static/data.diaries.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="_static/data.diaries.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    <no title>
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="CommandLine.html">The Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="IntroToGit.html">Git and Github</a></li>
<li class="toctree-l1"><a class="reference internal" href="Your_Coding_Environment.html">Your Coding Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="Basic_intro_Python.html">Python Basics</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Geocoding with APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="Linear_Regression_Basics.html">Linear Regression for Machine Learning: The Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Machine_Learning_BHDataset.html">ML Basics: Boston Housing Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="Ensemble_Learning_BH.html">Ensemble Learning: Bagging, Boosting, and Stacking</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FGeocoder.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Geocoder.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Geocoding with APIs</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-bing-maps-api">Testing the Bing Maps API</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-preprocessing">Data Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geocoding-the-addresses">Geocoding The Addresses</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="geocoding-with-apis">
<h1>Geocoding with APIs<a class="headerlink" href="#geocoding-with-apis" title="Permalink to this heading">#</a></h1>
<p>Excellent data analysis is only as good as the quality of data you use. As a Data Scientist, I find myself spend most of my time finding quality data sources and filling gaps in my datasets. This is especially true with Geospatial analysis. Often times you’ll find yourself left with a dataset that only has an address column, missing key information necessary for spatial analysis – latitude and longitude coordinates. In this case you’ll need to do some <strong>Geocoding</strong>.</p>
<p><strong>Geocoding is the computational process of transforming a physical address description to a location on the Earth’s surface (spatial representation in numerical coordinates)</strong>.</p>
<p>This sounds like a daunting process, but it can easily be done with the help of Python and an <strong>API</strong>. API stands for <em>“Application Programming Interface</em>.” It is a set of rules and protocols that allows different software applications to communicate and interact with each other. APIs enable different systems to exchange data and can be extremely useful for filling gaps in datasets. We’ll be using the <strong>Bing Maps API</strong> to geocode our addresses.</p>
<p>Before diving in you need to get a Bing Maps API Key, which you can do by following these <a class="reference external" href="https://www.microsoft.com/en-us/maps/create-a-bing-maps-key">simple steps</a>.</p>
<p>Next, import the libraries and packages needed which are the geocoder library and the pandas and re packages.</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>geocoder
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">geocoder</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="testing-the-bing-maps-api">
<h2>Testing the Bing Maps API<a class="headerlink" href="#testing-the-bing-maps-api" title="Permalink to this heading">#</a></h2>
<p>Now that we have all our tools, test out the Geocoder package and the API Key to make sure they work.</p>
<p>We’ll define our geocoder as <strong>g</strong> and make a request to Bing to geocode a specific address. The Bing Maps API needs the <strong>address line</strong>(Street Address), <strong>locality</strong>(City/Town), and <strong>adminDistrict</strong>(State) to geocode the addresses. You also need to pass the developer key you retrieved from Bing through the geocoder.</p>
<p>After running this, your output should be the latitudinal and longitudinal coordinates of the address we used for testing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">bing</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">addressline</span> <span class="o">=</span> <span class="s1">&#39;2831 Henderson Rd, Redding, CA 96002&#39;</span><span class="p">,</span> <span class="n">locality</span><span class="o">=</span><span class="s1">&#39;Redding&#39;</span><span class="p">,</span> <span class="n">adminDistrict</span><span class="o">=</span><span class="s1">&#39;California&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">APIKey</span><span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">json</span>
<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span>  <span class="n">g</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">latlng</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[40.57463837, -122.38108826]
</pre></div>
</div>
</div>
</div>
<p>Pretty cool right? We can also reverse geocode coordinates to retrieve specific address locations for any place in the world. Lets test this out below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">bing</span><span class="p">([[</span><span class="mf">26.351670</span><span class="p">,</span> <span class="mf">127.769400</span><span class="p">],</span> <span class="p">[</span><span class="mf">48.845580</span><span class="p">,</span> <span class="mf">2.321807</span><span class="p">]],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;batch_reverse&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">APIKey</span><span class="p">)</span>

<span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">g</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">city</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">postal</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">country</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kadena Town, Nakagami County, Okinawa, Japan Kadena Town  Okinawa Japan
114 Rue de Vaugirard, 75006 Paris, France Paris 75006 Île-de-France France
</pre></div>
</div>
</div>
</div>
</section>
<section id="data-preprocessing">
<h2>Data Preprocessing<a class="headerlink" href="#data-preprocessing" title="Permalink to this heading">#</a></h2>
<p>Now that its been confirmed that the geocoder tool is working, lets read in the excel file of the addresseses we’d like to geocode. Head over to my <a class="reference external" href="https://github.com/AnnetteTamakloe/Geocoding/tree/master">github page</a> for to download a copy of the file. Make sure to save it in the same folder as the current notebook you are using.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Read in your file </span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;addresses.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Take a look at the file</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>address</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>Whitlow Plan, Brookland Grove, Washington, DC ...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Unit 02 Plan, Aria Reserve Miami, Miami, FL 33137</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>Unit 01 A Plan, Aria Reserve Miami, Miami, FL ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3</td>
      <td>The Buchanan Plan, The Townhomes At Michigan P...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4</td>
      <td>Plan 3 Plan, Hudson At Belterra, Austin, TX 78737</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Lets check the number of addresses in the file</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>196
</pre></div>
</div>
</div>
</div>
<p>Now lets transform our data to make it easy for our Bing API to do its job.  Our data frame must have columns for the <strong>address line</strong>(Street Address), <strong>locality</strong>(City/Town), and  <strong>adminDistrict</strong>(State).
We’ll use <strong>Pandas</strong> and the <strong>re</strong> packages to clean the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Create an empty list to store our data</span>
<span class="n">geo_data</span> <span class="o">=</span> <span class="p">[]</span> 

<span class="c1">#Create a forloop that goes through each address and splices it by street name, city, country, name, zip</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="n">address</span> <span class="o">=</span> <span class="n">i</span>
    <span class="n">street</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">city</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;U.S.&#39;</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">zipcode</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    
<span class="c1">#Define our data by passing it through a dictionary to define our columns and put it into a list</span>
    <span class="n">geo_data</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="n">address</span><span class="p">,</span> <span class="s1">&#39;street&#39;</span><span class="p">:</span> <span class="n">street</span><span class="p">,</span> <span class="s1">&#39;city&#39;</span><span class="p">:</span> <span class="n">city</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">:</span> <span class="n">state</span><span class="p">,</span>
                     <span class="s1">&#39;zip&#39;</span><span class="p">:</span> <span class="n">zipcode</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="n">country</span><span class="p">})</span>

<span class="c1">#Create a DataFrame from the list of dictionaries</span>
<span class="n">geo</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">geo_data</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We also need to create columns for the latitude and longitude coordinates the geocoder will retrieve from the the Bing API.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geo</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
<span class="n">geo</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
</pre></div>
</div>
</div>
</div>
<p>This is how the our dataset should look like after our data preprocessing session</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geo</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>address</th>
      <th>street</th>
      <th>city</th>
      <th>state</th>
      <th>zip</th>
      <th>country</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Whitlow Plan, Brookland Grove, Washington, DC ...</td>
      <td>Whitlow Plan</td>
      <td>Brookland Grove</td>
      <td>DC</td>
      <td>20017</td>
      <td>U.S.</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>1</th>
      <td>Unit 02 Plan, Aria Reserve Miami, Miami, FL 33137</td>
      <td>Unit 02 Plan</td>
      <td>Aria Reserve Miami</td>
      <td>FL</td>
      <td>33137</td>
      <td>U.S.</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>2</th>
      <td>Unit 01 A Plan, Aria Reserve Miami, Miami, FL ...</td>
      <td>Unit 01 A Plan</td>
      <td>Aria Reserve Miami</td>
      <td>FL</td>
      <td>33137</td>
      <td>U.S.</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>3</th>
      <td>The Buchanan Plan, The Townhomes At Michigan P...</td>
      <td>The Buchanan Plan</td>
      <td>The Townhomes At Michigan Park</td>
      <td>DC</td>
      <td>20017</td>
      <td>U.S.</td>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <th>4</th>
      <td>Plan 3 Plan, Hudson At Belterra, Austin, TX 78737</td>
      <td>Plan 3 Plan</td>
      <td>Hudson At Belterra</td>
      <td>TX</td>
      <td>78737</td>
      <td>U.S.</td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="geocoding-the-addresses">
<h2>Geocoding The Addresses<a class="headerlink" href="#geocoding-the-addresses" title="Permalink to this heading">#</a></h2>
<p>Now its time to geocode. We will create a for loop to pass each address through the geocoder we created a couple steps before, except this time, we’ll be passing the our columns that contain our data through it. Just as before, we’ll have to use the API Developer key to make the request to Bing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">geo</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">geocoder</span><span class="o">.</span><span class="n">bing</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">addressline</span> <span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;street&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">locality</span><span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;city&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">adminDistrict</span><span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">PostalCode</span><span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;zip&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">Countryregion</span><span class="o">=</span> <span class="n">geo</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">],</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;details&#39;</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="s1">&#39;AqkhJ4a6kTQ6c4rm5vicHt7BsTav-KsWdaaKCnP794yFpzMDWPa1XCp14WUliC20&#39;</span><span class="p">)</span>
        <span class="n">g</span><span class="o">.</span><span class="n">json</span>
        <span class="n">geo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">lat</span>
        <span class="n">geo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;long&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">g</span><span class="o">.</span><span class="n">lng</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">geo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39; &#39;</span>
        <span class="n">geo</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;long&#39;</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39; &#39;</span> 
</pre></div>
</div>
</div>
</div>
<p>Now lets take a look out our dataframe geo. The lat and long columns should now be populated with the latitudinal and longitudinal coordinates for each of our addresses.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">geo</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>address</th>
      <th>street</th>
      <th>city</th>
      <th>state</th>
      <th>zip</th>
      <th>country</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Whitlow Plan, Brookland Grove, Washington, DC ...</td>
      <td>Whitlow Plan</td>
      <td>Brookland Grove</td>
      <td>DC</td>
      <td>20017</td>
      <td>U.S.</td>
      <td>38.904778</td>
      <td>-77.016289</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Unit 02 Plan, Aria Reserve Miami, Miami, FL 33137</td>
      <td>Unit 02 Plan</td>
      <td>Aria Reserve Miami</td>
      <td>FL</td>
      <td>33137</td>
      <td>U.S.</td>
      <td>28.595512</td>
      <td>-82.487343</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Unit 01 A Plan, Aria Reserve Miami, Miami, FL ...</td>
      <td>Unit 01 A Plan</td>
      <td>Aria Reserve Miami</td>
      <td>FL</td>
      <td>33137</td>
      <td>U.S.</td>
      <td>28.595512</td>
      <td>-82.487343</td>
    </tr>
    <tr>
      <th>3</th>
      <td>The Buchanan Plan, The Townhomes At Michigan P...</td>
      <td>The Buchanan Plan</td>
      <td>The Townhomes At Michigan Park</td>
      <td>DC</td>
      <td>20017</td>
      <td>U.S.</td>
      <td>38.904778</td>
      <td>-77.016289</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Plan 3 Plan, Hudson At Belterra, Austin, TX 78737</td>
      <td>Plan 3 Plan</td>
      <td>Hudson At Belterra</td>
      <td>TX</td>
      <td>78737</td>
      <td>U.S.</td>
      <td>31.463848</td>
      <td>-99.333298</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>191</th>
      <td>065-620-017, Redding, CA 96001</td>
      <td>065-620-017</td>
      <td>Redding</td>
      <td>CA</td>
      <td>96001</td>
      <td>U.S.</td>
      <td>40.574638</td>
      <td>-122.381088</td>
    </tr>
    <tr>
      <th>192</th>
      <td>(Undisclosed Address), Washington, DC 20020</td>
      <td>(Undisclosed Address)</td>
      <td>Washington</td>
      <td>DC</td>
      <td>20020</td>
      <td>U.S.</td>
      <td>38.892063</td>
      <td>-77.019913</td>
    </tr>
    <tr>
      <th>193</th>
      <td>(Undisclosed Address), Miami, FL 33177</td>
      <td>(Undisclosed Address)</td>
      <td>Miami</td>
      <td>FL</td>
      <td>33177</td>
      <td>U.S.</td>
      <td>25.775084</td>
      <td>-80.194702</td>
    </tr>
    <tr>
      <th>194</th>
      <td>(Undisclosed Address), Miami, FL 33125</td>
      <td>(Undisclosed Address)</td>
      <td>Miami</td>
      <td>FL</td>
      <td>33125</td>
      <td>U.S.</td>
      <td>25.775084</td>
      <td>-80.194702</td>
    </tr>
    <tr>
      <th>195</th>
      <td>Whitlow Plan, Brookland Grove, Washington, DC ...</td>
      <td>Whitlow Plan</td>
      <td>Brookland Grove</td>
      <td>DC</td>
      <td>20017</td>
      <td>U.S.</td>
      <td>38.904778</td>
      <td>-77.016289</td>
    </tr>
  </tbody>
</table>
<p>196 rows × 8 columns</p>
</div></div></div>
</div>
<p>And with that, we have completed the geocoding process. With this dataset, you should be able to make rich visualizations filled with detail and meaningful data analysis in tools like Tableau, Python or R.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="Basic_intro_Python.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Python Basics</p>
      </div>
    </a>
    <a class="right-next"
       href="Linear_Regression_Basics.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Linear Regression for Machine Learning: The Basics</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-the-bing-maps-api">Testing the Bing Maps API</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-preprocessing">Data Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geocoding-the-addresses">Geocoding The Addresses</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Annette Tamakloe
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>